<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <LINK REL=StyleSheet HREF="css/style.css" TYPE="text/css" MEDIA=screen>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Roboto:wght@100&display=swap"
        rel="stylesheet">
    <!-- Jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>App</title>
</head>

<body style="font-family: 'Roboto', sans-serif;">
    <div id="top">
        <img src="logo.svg">
    </div>


    <div id="cuerpo">
        <div class="sec3">
            <div style="margin: 0 auto 0 auto; padding-top: 20px;">
                <img src='img/dott.jpeg' id="img" class='imgRedonda' />
                <p id="nombre"><b>ERNETA</b>, Luciana</p>
                <p>28 años</p>
                <div class="pais" id="pais">
                    <img src="img/arg.jpeg"> ARG
                </div>
            </div>
        </div>

        <div id="sec2">
            <p class="encabezado"><b>PRÓXIMO PARTIDO</b></p>
            <div class="partido">
                <p class="tit">Mac A - Zona de grupos</p>
                <p class="subtit">Sábado 18-05</p>
                <table class="result">
                    <tr>
                        <td><b>ERNETA</b>, Luciana</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td><b>ERNETA</b>, Luciana</td>
                        <td>-</td>
                        <td>-</td>
                    </tr>
                </table>


            </div>

        </div>
        <div class="sec4">
            <p class="titulo2" style="text-align:left;"><b>DESEMPEÑO HISTÓRICO</b></p><br>
        </div>
        <div class="estadistica">
            <div class="valores">
                <p style="width:100%; margin-left: 25px; padding: 0px; margin:0px;">Torneos jugados
                </p>
            </div>
            <div class="barra">
                <div class="der" id="der" style="width:100%;margin-top: 0px; padding:0px;">
                    <div></div>
                </div>
            </div>


        </div>
        <div class="estadistica">
            <div class="valores">
                <p style="width:100%; margin-left: 25px; padding: 0px; margin:0px;">Torneos jugados
                </p>
            </div>
            <div class="barra">
                <div class="der" id="ter" style="width:100%;margin-top: 0px; padding:0px;">
                    <div></div>
                </div>
            </div>


        </div>
        <div class="estadistica">
            <div class="valores">
                <p style="width:100%; margin-left: 25px; padding: 0px; margin:0px;">Títulos
                </p>
            </div>
            <div class="barra">
                <div class="der" id="tit" style="width:100%;margin-top: 0px; padding:0px;">
                    <div></div>
                </div>
            </div>
        </div>

        <div class="estadistica">
            <div class="valores">
                <p style="width:100%; margin-left: 25px; padding: 0px; margin:0px;">Partidos jugados
                </p>
            </div>
            <div class="barra">
                <div class="der" id="pj" style="width:100%;margin-top: 0px; padding:0px;">
                    <div></div>
                </div>
            </div>
        </div>

        <div class="estadistica">
            <div class="valores">
                <p style="width:100%; margin-left: 25px; padding: 0px; margin:0px;">Partidos ganados
                </p>
            </div>
            <div class="barra">
                <div class="der" id="pg" style="width:100%;margin-top: 0px; padding:0px;">
                    <div></div>
                </div>
            </div>
        </div>

        <div class="estadistica">
            <div class="valores">
                <p style="width:100%; margin-left: 25px; padding: 0px; margin:0px;">Set Ganados
                </p>
            </div>
            <div class="barra">
                <div class="der" id="sg" style="width:100%;margin-top: 0px; padding:0px;">
                    <div></div>
                </div>
            </div>
        </div>

        <div class="estadistica">
            <div class="valores">
                <p style="width:100%; margin-left: 25px; padding: 0px; margin:0px;">Games ganados
                </p>
            </div>
            <div class="barra">
                <div class="der" id="gg" style="width:100%;margin-top: 0px; padding:0px;">
                    <div></div>
                </div>
            </div>
        </div>

        <div class="estadistica">
            <div class="valores">
                <p style="width:100%; margin-left: 25px; padding: 0px; margin:0px;">Games perdidos
                </p>
            </div>
            <div class="barra">
                <div class="der" id="gp" style="width:100%;margin-top: 0px; padding:0px;">
                    <div></div>
                </div>
            </div>
        </div>

    </div>
    <div style="height: 70px"></div>

    <div class="fixed">
        <div id="barra">
            <div><img src="img/ic1.png" id="ic1">
                <p><b>PARTIDOS</b></p>
            </div>
            <div style="padding-top: 5px"><img src="img/ic2.png" id="ic2">
                <P style="padding-top: 5px">POSICIONES</P>
            </div>
            <div><img src="img/ic3.png" id="ic3">
                <P>JUGADOR</P>
            </div>
        </div>
    </div>
</body>
<script type="text/javascript">


    var anuncioParam = 0;

    var queryString = window.location.search;
    var urlParams = new URLSearchParams(queryString);
    anuncioParam = urlParams.get('id');
    console.log(anuncioParam);



    window.addEventListener('DOMContentLoaded',
        function () {
            console.log('El DOM  esta listo!');
        })


    $(document).ready(function () {
        $("#ic1").click(() => {
            window.location.replace('./index.html')
        })
        $("#ic2").click(() => {
            window.location.replace('./categ1.html?id=0')
        })
        $("#ic3").click(() => {
            window.location.replace('./buscar.html')
        })

        let xhr = new XMLHttpRequest();

        let json = JSON.stringify({
            type: "C",
            request: "JUGADORES",
            id: anuncioParam
        });

        xhr.open("POST", 'http://51.195.181.135/tenis_API/default.aspx')
        xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');

        xhr.send(json);

        var dev = "";
        xhr.onload = function () {
            var json = JSON.parse(xhr.response);
            console.log(json);
            var foto = ""
            for (x of json) {
                if (x.foto == "0") {
                    foto = "http://51.195.181.135/admin_emiopen/fotos/foto.png"
                } else {
                    foto = "http://51.195.181.135/admin_emiopen/fotos/" + x.foto
                }
                document.all['img'].src = foto;
                $("#nombre").html("<b>" + x.apellido + "</b>, " + x.nombre);
                $("#pais").html("<img src='img/arg.jpeg'>" + x.nacionalidad);


                nombre = x.nombre;
                apellido = x.apellido;
                dni = x.dni;
                email = x.email;
                instagram = x.instagram;
                brazo_habil = x.bh
                golpe_favorito = x.gp;
                importe = x.importe;
                dias = x.dj;
                nacionalidad = x.nacionalidad;
                pagoinscripcion = x.pi;
                nacimiento = x.fn;
                sexo = x.sexo;
                foto = x.foto;
                pp = x.pp
            }
        }


        let xhr2 = new XMLHttpRequest();

        let json2 = JSON.stringify({
            type: "C",
            request: "ESTADISTICA_DESEMPEÑO",
            id: anuncioParam
        });
        xhr2.open("POST", 'http://51.195.181.135/tenis_API/default.aspx')
        xhr2.setRequestHeader('Content-type', 'application/json; charset=utf-8');

        xhr2.send(json2);

        var dev = "";
        var ter = ""
        xhr2.onload = function () {
            var json = JSON.parse(xhr2.response);
            console.log(json);
            var foto = ""
            for (x of json) {
                ter = "<div>" + x.torneos + "</div>"
                tit = "<div>" + x.titulos + "</div>"
                pg = "<div>" + x.pg + "</div>"
                pj = "<div>" + x.pj + "</div>"
                sg = "<div>" + x.SG + "</div>"
                gp = "<div>" + x.gp + "</div>"
                gg = "<div>" + x.GG + "</div>"
            }
            $("#ter").html(ter);
            $("#tit").html(tit);
            $("#pg").html(pg);
            $("#pj").html(pj);
            $("#sg").html(sg);
            $("#gp").html(pg);
            $("#gg").html(gg);
        }

    })

</script>


</html>